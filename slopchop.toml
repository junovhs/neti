[rules]
max_file_tokens = 2000
max_cyclomatic_complexity = 8
max_nesting_depth = 3
max_function_args = 5
max_function_words = 5
ignore_naming_on = [
    "tests",
    "spec",
    "src/stage/state.rs",
    "src/stage/tests_manager.rs",
    "src/stage/tests_promote.rs",
    "src/apply/patch/tests.rs",
    "src/apply/parser.rs",
    "src/apply/verification.rs",
    "src/apply/executor.rs",
    "src/stage/copy.rs",
    "src/audit",
    "src/pack",
    "src/clipboard",
    "src/signatures",
]
ignore_tokens_on = [
    "README.md",
    "CHANGELOG.md",
    "CONTRIBUTING.md",
    "lock",
    "docs",
    "pivot_brief.md",
]

[rules.safety]
require_safety_comment = true
ban_unsafe = false

[rules.locality]
max_distance = 2
l1_threshold = 2
hub_threshold = 1.0
min_hub_afferent = 5
god_module_threshold = 20
deadwood_threshold = 2
mode = "warn"
exempt_patterns = []

[preferences]
auto_copy = true
auto_format = false
system_bell = false
backup_retention = 5
progress_bars = true
require_plan = true
write_fix_packet = false
fix_packet_path = "slopchop-fixme.txt"
auto_promote = false

[commands]
check = [
    "cargo clippy --all-targets -- -D warnings -W clippy::pedantic -W clippy::unwrap_used -W clippy::expect_used -W clippy::indexing_slicing -A clippy::struct_excessive_bools -A clippy::module_name_repetitions -A clippy::missing_errors_doc -A clippy::must_use_candidate",
    "cargo test"
]
